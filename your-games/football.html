<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mini Football</title>
<style>
  body {
    margin: 0;
    background: #064e3b;
    font-family: Arial, sans-serif;
    color: white;
    text-align: center;
  }

  canvas {
    background: #065f46;
    display: block;
    margin: 20px auto;
    border: 4px solid #022c22;
  }

  #ui {
    display: flex;
    justify-content: center;
    gap: 40px;
    font-size: 18px;
  }

  button {
    padding: 10px 16px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
  }
</style>
</head>
<body>

<h1>üèà Mini Football</h1>

<div id="ui">
  <div>Score: <span id="score">0</span></div>
  <div>High Score: <span id="high">0</span></div>
</div>

<canvas id="game" width="800" height="400"></canvas>

<p>
  Controls: ‚Üê ‚Üí move | SPACE = throw
</p>

<button onclick="resetGame()">Restart</button>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let score = 0;
let highScore = localStorage.getItem("footballHigh") || 0;
document.getElementById("high").textContent = highScore;

const player = { x: 100, y: 200, w: 20, h: 20 };
let ball = null;

let defenders = [];
let keys = {};

function spawnDefender() {
  defenders.push({
    x: 800,
    y: Math.random() * 360 + 20,
    w: 20,
    h: 20,
    speed: 2 + Math.random() * 2
  });
}

setInterval(spawnDefender, 1200);

document.addEventListener("keydown", e => keys[e.code] = true);
document.addEventListener("keyup", e => keys[e.code] = false);

function resetGame() {
  score = 0;
  defenders = [];
  ball = null;
}

function throwBall() {
  if (!ball) {
    ball = { x: player.x + 20, y: player.y + 10, r: 6, speed: 6 };
  }
}

function update() {
  if (keys["ArrowUp"]) player.y -= 4;
  if (keys["ArrowDown"]) player.y += 4;
  if (keys["ArrowLeft"]) player.x -= 4;
  if (keys["ArrowRight"]) player.x += 4;

  player.y = Math.max(0, Math.min(canvas.height - player.h, player.y));
  player.x = Math.max(0, Math.min(canvas.width - player.w, player.x));

  if (keys["Space"]) throwBall();

  if (ball) {
    ball.x += ball.speed;
    if (ball.x > canvas.width) {
      score++;
      document.getElementById("score").textContent = score;
      ball = null;
    }
  }

  defenders.forEach(d => d.x -= d.speed);

  defenders = defenders.filter(d => d.x + d.w > 0);

  defenders.forEach(d => {
    if (collide(player, d)) gameOver();
    if (ball && collideCircle(ball, d)) {
      score++;
      document.getElementById("score").textContent = score;
      d.x = -100;
      ball = null;
    }
  });
}

function gameOver() {
  if (score > highScore) {
    highScore = score;
    localStorage.setItem("footballHigh", highScore);
    document.getElementById("high").textContent = highScore;
  }
  alert("Tackled! Game Over.");
  resetGame();
}

function collide(a, b) {
  return a.x < b.x + b.w &&
         a.x + a.w > b.x &&
         a.y < b.y + b.h &&
         a.y + a.h > b.y;
}

function collideCircle(c, r) {
  return c.x > r.x &&
         c.x < r.x + r.w &&
         c.y > r.y &&
         c.y < r.y + r.h;
}

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // player
  ctx.fillStyle = "#22c55e";
  ctx.fillRect(player.x, player.y, player.w, player.h);

  // ball
  if (ball) {
    ctx.fillStyle = "#facc15";
    ctx.beginPath();
    ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI * 2);
    ctx.fill();
  }

  // defenders
  ctx.fillStyle = "#ef4444";
  defenders.forEach(d => ctx.fillRect(d.x, d.y, d.w, d.h));
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
